<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>เกมคำต้องห้าม — หมวดเดียวกันตามเวลา</title>
  <style>
    :root { --bg:#0b0c10; --fg:#eaf2ff; --muted:#93a3b8; }
    html, body { height:100%; margin:0; }
    body {
      display:grid; place-items:center; background:#0b0c10; color:var(--fg);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      user-select:none; cursor:pointer; overflow:hidden;
      background: radial-gradient(1200px 800px at 50% -20%, #111522 0%, var(--bg) 40%, #07080e 100%);
    }
    .wrap { text-align:center; padding:4vmin; max-width:min(92vw,1200px); }
    .category { font-size:clamp(14px,2.5vw,18px); color:var(--muted); margin-bottom:.75rem; }
    .word { font-size:clamp(40px,12vw,140px); font-weight:800; line-height:1.1; margin:0; text-shadow:0 2px 18px rgba(0,0,0,.35); }
    .hint { font-size:clamp(12px,2.6vw,16px); color:var(--muted); margin-top:1rem; }
  </style>
</head>
<body>
  <div class="wrap" aria-live="polite" aria-atomic="true">
    <div class="category" id="category">กำลังคำนวณหมวด…</div>
    <h1 class="word" id="word">คลิกเพื่อสุ่มคำ</h1>
    <div class="hint">คลิก/แตะที่ใดก็ได้ หรือกด Space/Enter เพื่อสุ่มคำใหม่ • หมวดหมู่จะเปลี่ยนพร้อมกันทุกๆ 2 นาที (อิงเวลาเครื่อง)</div>
  </div>

  <script>
    // ===== ชุดคำหลัก 100 คำ/หมวด =====
const DATA = {
  "A": [
    "Thank","Say","Ice","Water","Today","Tomorrow","Now","Yesterday","Clock","Time",
    "Can","Have","This","Soda","Beer","Same","Thing","What","So","Fine","Ok"
  ],
  "B": [
    "Really","True","Sure","Yes","How","And","No","We","Right","Left",
    "Air","Toothbrush","Wash","Bed","Kitchen","Floor","Light","Switch","Oven","Minute"
  ],
  "C": [
    "Lound","Cold","Hot","Ice","Cream","Cone","Dessert","Strawberry","Mint","If",
    "So","Favorate","Banana","Lick","Food","Car","Lunch","Breakfast","Dinner","Brunch"
  ],
  "D": [
    "Korea","Thai","Kimchi","Rice","Bibimbab","Asia","Like","What","Love","Favorate",
    "Cambodia","PrimeMinister","Taksin","Plane","Live","Boarder","Dubai","Air","Country","Long"
  ]
};


    const categories = Object.keys(DATA);
    const wordEl = document.getElementById('word');
    const catEl = document.getElementById('category');

    // ความยาวช่วงเวลา: 2 นาที
    const INTERVAL_MS = 2 * 60 * 1000;

    // คำนวณ index หมวดหมู่จากเวลา เพื่อให้ทุกคนเห็นหมวดเดียวกัน
    function categoryIndexByTime(t = Date.now()) {
      return Math.floor(t / INTERVAL_MS) % categories.length;
    }

    function currentCategory() { return categories[categoryIndexByTime()]; }

    function updateCategoryLabel() {
      const cat = currentCategory();
      catEl.textContent = `หมวดหมู่: ${cat} (จะเปลี่ยนทุก 2 นาที)`;
      document.title = `${cat} — เกมคำต้องห้าม`;
    }

    let lastWordIndex = -1;

    function nextWord() {
      // สุ่มคำเฉพาะตอนผู้ใช้กดเท่านั้น
      const cat = currentCategory();
      const list = DATA[cat];
      if (!list || list.length === 0) return;
      let i = Math.floor(Math.random() * list.length);
      if (i === lastWordIndex) i = (i + 1) % list.length; // กันซ้ำทันที
      lastWordIndex = i;
      wordEl.textContent = list[i];
      updateCategoryLabel(); // อัปเดตหัวหมวดด้วย เผื่อช่วงเวลาเปลี่ยนพอดี
    }

    // คลิกหรือ Space/Enter เท่านั้นถึงจะสุ่มคำใหม่
    document.addEventListener('click', nextWord);
    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space' || e.key === ' ' || e.key === 'Enter') {
        e.preventDefault();
        nextWord();
      }
    }, { passive: false });

    // แค่แสดงหมวดปัจจุบันตั้งแต่โหลดครั้งแรก (ยังไม่สุ่มจนกว่าผู้ใช้กด)
    updateCategoryLabel();

    // ติดตามการเปลี่ยนช่วงเวลาเพื่ออัปเดตเฉพาะป้ายหมวด (ไม่สุ่มคำเอง)
    let lastBucket = categoryIndexByTime();
    setInterval(() => {
      const curBucket = categoryIndexByTime();
      if (curBucket !== lastBucket) {
        lastBucket = curBucket;
        updateCategoryLabel(); // เปลี่ยนเฉพาะชื่อหมวด ไม่เปลี่ยนคำ
      }
    }, 1000); // ตรวจทุก 1 วินาที เบาๆ
  </script>
</body>
</html>
